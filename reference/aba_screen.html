<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function runs a clinical trial screening analysis based on a fitted aba
model with glm stats. You can supply different inclusion thresholds which
represent predicted probabilities from the glm stats, and you can also
supply cost multipliers and the required sample size in order to perform a
cost-benefit analysis. This analysis uses bootstrap sampling to generate
confidence intervals."><title>Create an aba screen object. — aba_screen • aba</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create an aba screen object. — aba_screen"><meta property="og:description" content="This function runs a clinical trial screening analysis based on a fitted aba
model with glm stats. You can supply different inclusion thresholds which
represent predicted probabilities from the glm stats, and you can also
supply cost multipliers and the required sample size in order to perform a
cost-benefit analysis. This analysis uses bootstrap sampling to generate
confidence intervals."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script>if(!sessionStorage.getItem("_swa")&&document.referrer.indexOf(location.protocol+"//"+location.host)!== 0){fetch("https://counter.dev/track?"+new URLSearchParams({referrer:document.referrer,screen:screen.width+"x"+screen.height,user:"nickmarch31",utcoffset:"1"}))};sessionStorage.setItem("_swa","1");</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">aba</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.9.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/aba.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-basic-tutorials">Basic Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-basic-tutorials">
    <a class="dropdown-item" href="../articles/intro_to_aba_models.html">Intro to aba models</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>FAQ</h6>
  </div>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-advanced-tutorials">Advanced Tutorials</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-advanced-tutorials">
    <a class="dropdown-item" href="../articles/intro_to_aba_models.html">Go further with aba models</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/overview.html">Gallery</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ncullen93/abaR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Create an aba screen object.</h1>
      <small class="dont-index">Source: <a href="https://github.com/ncullen93/abaR/blob/HEAD/R/aba_screen.R" class="external-link"><code>R/aba_screen.R</code></a></small>
      <div class="d-none name"><code>aba_screen.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function runs a clinical trial screening analysis based on a fitted aba
model with glm stats. You can supply different inclusion thresholds which
represent predicted probabilities from the glm stats, and you can also
supply cost multipliers and the required sample size in order to perform a
cost-benefit analysis. This analysis uses bootstrap sampling to generate
confidence intervals.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">aba_screen</span><span class="op">(</span>
  <span class="va">model</span>,
  <span class="va">threshold</span>,
  <span class="va">cost_multiplier</span>,
  <span class="va">include_n</span>,
  risk_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"relative"</span>, <span class="st">"absolute"</span><span class="op">)</span>,
  ntrials <span class="op">=</span> <span class="fl">100</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>an aba model. The fitted aba model which you want to use as
the screening algorithm.</p></dd>
<dt>threshold</dt>
<dd><p>double or vector of doubles between 0 and 1. The threshold
represents the percentage of individuals who will be invited to take the
inclusion test. Note that the threshold value is calculated in a relative
manner based on the values in the data population, not based on an absolute
risk value.</p></dd>
<dt>cost_multiplier</dt>
<dd><p>double or vector of doubles. The cost multiplier
represents how much more expensive it is to perform the main inclusion
test versus the screening test. Larger values mean that the main inclusion
test/biomarker is much more expensive than the screening test and will
therefore result in larger cost savings by using the screening model to
identify individuals who are at low risk to be positive on the main
inclusion test.</p></dd>
<dt>include_n</dt>
<dd><p>integer. The number of participants who you expect
to be included in the clinical trial. This is therefore the number of
individuals who must pass the screening test and who then must pass the
main inclusion test</p></dd>
<dt>risk_type</dt>
<dd><p>string ('relative' or 'absolute'). Whether to treat the
threshold as a relative risk in the population used to fit the model
(i.e. relative) or as an absolute risk based on predicted values
from the statistical model (i.e. absolute).</p></dd>
<dt>ntrials</dt>
<dd><p>integer. The number of bootstrap trials to run in order to
generate the confidence interval</p></dd>
<dt>verbose</dt>
<dd><p>logical. Whether to show a progress bar for each trial.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>an abaScreen object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># use built-in data</span></span>
<span class="r-in"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">adnimerge</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">VISCODE</span> <span class="op">==</span> <span class="st">'bl'</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># first, fit an aba model to predict amyloid PET status from plasma markers</span></span>
<span class="r-in"><span class="co"># In this scenario, PET is the "inclusion" marker and plasma is the</span></span>
<span class="r-in"><span class="co"># "screening" marker. PET is expensive and plasma is cheap, so we want to</span></span>
<span class="r-in"><span class="co"># use plasma markers to decide who should undergo PET scans in order to</span></span>
<span class="r-in"><span class="co"># minimize the risk of negative (i.e., wasted) PET scans.</span></span>
<span class="r-in"><span class="va">model</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="aba_model.html">aba_model</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="set_outcomes.html">set_outcomes</a></span><span class="op">(</span><span class="va">PET_ABETA_STATUS_bl</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="set_predictors.html">set_predictors</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="va">PLASMA_PTAU181_bl</span>, <span class="va">PLASMA_NFL_bl</span>,</span>
<span class="r-in">    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">PLASMA_PTAU181_bl</span>, <span class="va">PLASMA_NFL_bl</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">AGE</span>, <span class="va">GENDER</span>, <span class="va">EDUCATION</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="set_stats.html">set_stats</a></span><span class="op">(</span><span class="st">'glm'</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># summarise the model just to show the plasma biomarkers do in fact</span></span>
<span class="r-in"><span class="co"># provide some predictive value for amyloid PET status</span></span>
<span class="r-in"><span class="va">model_summary</span> <span class="op">&lt;-</span> <span class="va">model</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu"><a href="aba_summary.html">aba_summary</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Run the screening analysis while varying the inclusion threshold from</span></span>
<span class="r-in"><span class="co"># 25% to 75% (this is the percent of individuals who will be invited for</span></span>
<span class="r-in"><span class="co"># the PET scan) and varying the cost multiplier from 4 to 16 (this is how</span></span>
<span class="r-in"><span class="co"># much more PET costs compared to plasma) and assuming we want to recruit</span></span>
<span class="r-in"><span class="co"># 1000 amyloid PET positive subjects.</span></span>
<span class="r-in"><span class="va">model_screen</span> <span class="op">&lt;-</span> <span class="va">model</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">aba_screen</span><span class="op">(</span></span>
<span class="r-in">    threshold <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,</span>
<span class="r-in">    cost_multiplier <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">8</span>, <span class="fl">16</span><span class="op">)</span>,</span>
<span class="r-in">    include_n <span class="op">=</span> <span class="fl">1000</span>,</span>
<span class="r-in">    ntrials <span class="op">=</span> <span class="fl">5</span>,</span>
<span class="r-in">    verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span class="r-in">  <span class="op">)</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Nicholas Cullen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer></div>

  

  

  </body></html>

